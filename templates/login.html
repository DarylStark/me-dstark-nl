<!doctype html>
<html lang='en'>
  <head>
    <meta charset='utf-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, minimum-scale=1.0'>
    <title>{{ pagetitle }}</title>
    <!-- External CSS -->
    <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en'>
    <link rel='stylesheet' href='https://fonts.googleapis.com/icon?family=Material+Icons'>
    <link rel='stylesheet' href='https://code.getmdl.io/1.3.0/material.cyan-light_blue.min.css'>
    <!-- Own CSS -->
    <style>
        html, body {
            font-family: 'Roboto', 'Helvetica', sans-serif;
            background-color: #039be5;
            margin: 0px;
            padding: 0px;
        }

        div.login {
            width: auto;
            background-image: url(/images/login.jpg);
            background-size: 105%;
            margin: 0px;
            padding: 0px;
        }

        div#my-signin2 {
            position: relative;
            left: 0px;
        }

        .mdl-cell, .mdl-grid {
            margin-top: 0px;
            padding-top: 0px;
        }
    </style>
    <!-- Metadata -->
    <meta name='google-signin-client_id' content='167809871556-5rtenoj1e65tic5nu08m6g197e4dm9d1.apps.googleusercontent.com'>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script>
        // Function to resize the logincard
        function resize() {
            $('.login').height(($('.login').width() * 0.667)) - 10;
            $('.login').css(
                'top',
                ($(document).height() / 2) - ($('.login').height() / 2)
            )

            $('#my-signin2').css(
                'left',
                $('.login').width() - 250
            );

            $('#my-signin2').css(
                'top',
                $('.login').height() - 60
            );
        }

        // Add the handlers
        $(document).ready(resize);
        $(window).resize(resize);
    </script>
  </head>

  <body>

    <div class='mdl-grid'>
        <div class='mdl-cell mdl-cell--3-col-desktop mdl-cell--1-col-tablet mdl-cell--hide-phone'></div>
        <div class='mdl-cell mdl-cell--6-col mdl-cell--4-col-phone'>
            <div class='mdl-card mdl-shadow--4dp login'>
                <div class='mdl-card__content'>
                    <div id='my-signin2'></div>
                    <script>
                        function succesLogin() {
                            window.location.href = '/';
                        }

                        function errorLogin() {
                            console.log('error');
                        }

                        function onSuccess(googleUser) {
                            // Get the user token for this user
                            token = googleUser.getAuthResponse().id_token;

                            // Send the token to the verification API
                            $.ajax({
                                type: 'POST',
                                url: '/api/user.Verify',
                                data: { 'token': token },
                                success: succesLogin,
                                error: errorLogin
                            });

                            // If verified; redirect the user to the homepage

                            // If not verified; redirect the user to the error page
                        }

                        function renderButton() {
                            gapi.signin2.render('my-signin2', {
                                'scope': 'profile email',
                                'width': 240,
                                'height': 50,
                                'longtitle': true,
                                'theme': 'dark',
                                'onsuccess': onSuccess
                            });
                        }
                    </script>
                    <script src='https://apis.google.com/js/platform.js?onload=renderButton' async defer></script>
                </div>
            </div>
        </div>
        <div class='mdl-cell mdl-cell--3-col-desktop mdl-cell--1-col-tablet mdl-cell--hide-phone'></div>
    </div>

  </body>
</html>