<!doctype html>
<html lang='en'>
  <head>
    <meta charset='utf-8'>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <title>{{ pagetitle }}</title>
    <!-- External CSS -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.cyan-light_blue.min.css">
    <!-- Own CSS -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- Javascript -->
    <script defer src='/js/jquery.js'></script>
    <script defer src='/js/main.js'></script>
    <script defer src='https://code.getmdl.io/1.3.0/material.min.js'></script>
    <!-- Metadata -->
    <meta name='google-signin-client_id' content='167809871556-5rtenoj1e65tic5nu08m6g197e4dm9d1.apps.googleusercontent.com'>
    <!-- Javascript for Google -->
    <script>
        function onLoad() {
            gapi.load('auth2', function() {
                gapi.auth2.init();
            });
        }

        function logout() {
          gapi.auth2.getAuthInstance().signOut().then(function() {
            location.href = '/logout';
          });
        }
    </script>
    <script src="https://apis.google.com/js/platform.js?onload=onLoad" async defer></script>
  </head>

  <body>

    <div class='me-layout mdl-layout mdl-js-layout mdl-layout--fixed-drawer mdl-layout--fixed-header'>

      <!-- Snackbar for errors and notifications -->
      <div class='mdl-snackbar mdl-js-snackbar'>
        <div class='mdl-snackbar__text'></div>
        <button class='mdl-snackbar__action' type='button'></button>
      </div>

      <!-- Header -->
      <header class='mdl-layout__header mdl-color--grey-100 mdl-color-text--grey-600'>
        <div class='mdl-layout-icon'></div>
        <div class='mdl-layout__header-row'>
          <span class='mdl-layout__title' id='main_title'>{{ pagetitle }}</span>
          <div class='mdl-layout-spacer'></div>
          <button id='user_menu' class='mdl-button mdl-js-button mdl-button--icon'>
            <i class='material-icons'>account_circle</i>
          </button>
          <ul class='mdl-menu mdl-js-menu mdl-js-ripple-effect mdl-menu--bottom-right' for='user_menu'>
            {% for item in user_menu %}
              <li class='mdl-menu__item' id='{{ item.id }}'>{{ item.name }}</li>
            {% endfor %}
          </ul>
        </div>
      </header>

      <!-- Slide out drawer -->
      <div class='me-drawer mdl-layout__drawer mdl-color--blue-grey-900 mdl-color-text--blue-grey-50'>
        <header class='me-drawer-header'>
          <div class='me-avatar'>
            <span>{{ username }}</span>
            <div class='mdl-layout-spacer'></div>
            <button id="accbtn" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
              <i class="material-icons" role="presentation">arrow_drop_down</i>
            </button>
            <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="accbtn">
              <!-- TODO: make this work -->
              <li class='mdl-menu__item' id='1'>Link 1</li>
              <li class='mdl-menu__item' id='2'>Link 2</li>
              <li class='mdl-menu__item' id='3'>Link 3</li>
            </ul>
          </div>
        </header>
        <nav class='me-navigation mdl-navigation mdl-color--blue-grey-800'>
        {% for item in main_menu.menuitems %}
          <a class='mdl-navigation__link me-navigation__link' id='{{ item.id }}'><i class='mdl-color-text--blue-grey-400 material-icons' role='presentation' id='{{ item.id }}_icon'>{{ item.icon }}</i>{{ item.title }}</a>
        {% endfor %}
        {% for item in main_menu.submenus %}
        <span class='me-menu-section'>{{ item.name }}</span>
          {% for subitem in item.subitems %}
            <a class='mdl-navigation__link me-navigation__link' id='{{ subitem.id }}'><i class='mdl-color-text--blue-grey-400 material-icons' role='presentation'>{{ subitem.icon }}</i>{{ subitem.title }}</a>
          {% endfor %}
        {% endfor %}
      </div>

      <!-- Content -->
      <main class='mdl-layout__content mdl-color--grey-100' id='scroller'>
        <div class='me-progress mdl-progress mdl-js-progress mdl-progress__indeterminate' id='ui-progress'></div>
        <div class='me-progress-empty' id='ui-progress-empty'></div>
        <div id='content'></div>
      </main>

    </div>

  </body>
</html>